
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <title>消失效果 | Some Notes</title>
<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/fonts/lxgw/font.css">


<link rel="stylesheet" href="/fonts/ftawsm/fontaw.css">


<link rel="stylesheet" href="/fonts/ktx/katex.min.css">

    </head>
    <body>
        <main class="main">
            <div class="column">
                <header>
                    <div class="site-brand">
                        <div class="site-nav-left"></div>
                        <div class="site-meta">
                            <p class="site-title">Some Notes</p><p class="site-subtitle">Be HardWorking Every Day.</p>
                        </div>
                        <div class="site-nav-right"></div>
                    </div>
                    <nav class="site-nav">
                        <ul class="main-menu">
                            <li class="menu-item"><a href="/"><i class="fa fa-home fa-fw"></i>首页&emsp;&emsp; || /</a></li>
                            <li class="menu-item"><a href="/tags/"><i class="fa fa-tags fa-fw"></i>标签&emsp;&emsp; || tags</a></li>
                            <li class="menu-item"><a href="/categories/"><i class="fa fa-rectangle-list fa-fw"></i>分类&emsp;&emsp; || categories</a></li>
                            <li class="menu-item"><a href="/archives/"><i class="fa fa-archive fa-fw"></i>存档&emsp;&emsp; || archives</a></li>
                            <li class="menu-item menu-more">
                                <a class="menu-more-btn"><i class="fa fa-ellipsis-vertical fa-fw"></i>更多</a>
                                <a href="/friends/" class="morebtn-item"><i class="far fa-address-card fa-fw"></i>友情链接 || friends</a>
                                <a href="/guestbook/" class="morebtn-item"><i class="fa fa-pen-to-square fa-fw"></i>留言板&emsp; || guestbook</a>
                                <a href="/about/" class="morebtn-item"><i class="fa fa-circle-info fa-fw fa-fw"></i>关于&emsp;&emsp; || about</a>
                            </li>
                            <li class="menu-item"><a class="menu-search"><i class="fa fa-search fa-fw"></i>搜索</a></li>
                        </ul>
                    </nav>
                </header>
                <div class="site-sidebar">
                    
<script type="application/json" class="cfgKtx">false</script>
<div class="post-toc">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%92%8C%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">代码和使用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">示例</span></a></li></ol>
</div>
                </div>
            </div>
            <div class="main-inner">
                
<div class="post-block">
    <header class="post-header">
        <h2 class="post-title">消失效果</h2>
        <div class="post-meta">
            <span class="post-meta-item">
                <i class="far fa-calendar post-meta-item-icon"></i>
                <span class="post-meta-item-text">发表于 </span>
                <time datetime="2023-12-16T09:58:12+08:00">2023-12-16</time>
            </span>
            <span class="post-meta-item">
                <i class="far fa-calendar-check post-meta-item-icon"></i>
                <span class="post-meta-item-text">更新于 </span>
                <time datetime="2024-04-14T14:02:52+08:00">2024-04-14</time>
            </span>
            <span class="post-meta-item">
                <i class="far fa-folder post-meta-item-icon"></i>
                <span class="post-meta-item-text">分类于 </span>
                <a href="/categories/%E7%BC%96%E7%A8%8B%E9%9A%8F%E8%AE%B0/">编程随记</a>
            </span>
        </div>
    </header>
    <div class="post-body">
        <p>从 ncase.me 学来的，可以自己看源码。主要是通过<strong>背景图片</strong>的位置实现。结合了 CSS 和 JS。<br>可以自己增加一个函数在隐藏时执行。<br>你只要这样就可以：</p>
<pre class="language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
    美好的文字
    Have a good day!
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scratcher<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>

<p>代码和示例请看下面。</p>
<span id="more"></span>

<h2 id="代码和使用方法"><a href="#代码和使用方法" class="headerlink" title="代码和使用方法"></a>代码和使用方法</h2><p>模拟的笔涂白是通过 CSS 背景图片的位置完成的。代码如下：</p>
<pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.scratcher</span> <span class="token punctuation">&#123;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>https://s2.loli.net/2023/12/16/NOVHCgALzK4Fd1Q.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> 200% 2000%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>其中，<code>width</code> <code>height</code> 设为 100% 是为了铺满元素（整个使用时用到），<code>z-index</code> 进行覆盖。<br>使用时请添加 <code>&lt;div class=&quot;scratcher&quot;&gt;&lt;/div&gt;</code> 在准备显示隐藏的元素<strong>内</strong>，使其成为准备隐藏的元素的<strong>子元素</strong>，方便更改容器的位置。下面的 JS 会更改它的位置和大小。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> divList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".scratcher"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> divList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span>
    divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundPosition <span class="token operator">=</span> <span class="token string">"-100% -1900%"</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> lpnt <span class="token operator">=</span> divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token function">getComputedStyle</span><span class="token punctuation">(</span>lpnt<span class="token punctuation">)</span><span class="token punctuation">.</span>position <span class="token operator">==</span> <span class="token string">"relative"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>bottom <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
        divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>lpnt<span class="token punctuation">.</span>offsetTop<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
        divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>lpnt<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>lpnt<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
    divList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>lpnt<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>为了应对相对定位这种特殊情况，代码中也进行了判断。其他情况则是设置相同大小和位置（<code>left</code>,<code>top</code>），覆盖其父元素。<br>进行擦除和显示时，也采用 JS，自己可以在下面的代码中添加隐藏后执行的函数。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> divList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".scratcher"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">eraseAndShow</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">// 这里是第 num 个覆盖元素</span>
    divList<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"block"</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">19</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            divList<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundPosition <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0% </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>i <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">100</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// 更改背景位置</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// 在这里可以添加准备执行的函数，使用 `setTimeout` 设置延时为 1900 毫秒。</span>
    <span class="token comment">// 例如：</span>
    <span class="token comment">// setTimeout(() => &#123;myFunction();&#125;, 1900);</span>
    <span class="token comment">// 或者在第二行代码处添加参数，传递要执行的函数。</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">19</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            divList<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundPosition <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">-100% </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>i <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">100</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">2100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>divList<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在添加以上所有代码后，就可以在任意一个元素内添加 <code>&lt;div class=&quot;scratcher&quot;&gt;&lt;/div&gt;</code>，再在执行 JavaScript 代码 <code>eraseAndShow(0)</code>，试验性地查看效果。</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>下面是一些示例，点击按钮“隐藏和显示”可以看到效果</p>
<style>
    .scratcher {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url(https://s2.loli.net/2023/12/16/NOVHCgALzK4Fd1Q.png);
        background-size: 200% 2000%;
        display: none;
        z-index: 200;
    }
</style>

<p>以下文字在点击按钮后会被更改：</p>
<div id="theFirstExmDiv" style="height:16em;margin-bottom:2em;background-color:#eee;border-radius:3px;border:none;padding:.5em;">
    <p style="margin-bottom:5px;">心情，是一种感情状态，拥有了好心情，也就拥有了自信，继而拥有了年轻和健康。就拥有了对未来生活的向往，充满期待，让我们拥有一份好心情吧，因为生活着就是幸运和快乐。</p>
    <p style="margin-bottom:5px;">当你孤独时，风儿就是我的歌声，愿它能使你得到片刻的安慰；当你骄傲时，雨点就是我的警钟，愿它能使你获得永恒的谦逊。</p>
    <p style="margin-bottom:5px;">友情如水，淡而长远；友情如茶，香而清纯；友情如酒，烈而沁心；友情如雨，细而连绵；友情如雪，松而亮洁。人生短暂，珍惜友情。</p>
    <!-- 乱摘的甜鸡汤 -->
    <a class="btn" id="hidebtn1" href="javascript:eraseAndShow(0, 1);" style="margin-top:0;">隐藏和显示</a>
    <div class="scratcher"></div>
</div>

<p>由于是通过背景图片的位置模拟擦除效果，所以当点击按钮后在消失前按钮无法被点击。这个特性很好地使用在切换容器内容上。</p>
<p>以下是一个简单的示例：</p>
<div class="note danger"><p>danger #d9534f</p>
<p>test</p><p>test</p><p>test</p>
<p>test</p><p>test</p><p>test</p>
<p>test</p><p>test</p><p>test</p>
<a class="btn" id="hidebtn2" href="javascript:eraseAndShow(1);">隐藏和显示</a>
<div class="scratcher"></div></div>

<script>
    var divList = document.querySelectorAll(".scratcher");
    for(let i = 0; i < divList.length; i++) {
        divList[i].style.display = "none";
        divList[i].style.backgroundPosition = "-100% -1900%";
        var lpnt = divList[i].parentNode;
        if(window.getComputedStyle(lpnt).position == "relative") {
            divList[i].style.bottom = "0";
            divList[i].style.right = "0";
        }
        else {
            divList[i].style.top = String(lpnt.offsetTop) + "px";
            divList[i].style.left = String(lpnt.offsetLeft) + "px";
        }
        divList[i].style.width = String(lpnt.offsetWidth) + "px";
        divList[i].style.height = String(lpnt.offsetHeight) + "px";
    }
    function eraseAndShow(num, a) {
        divList[num].style.display = "block";
        for(let i = 1; i <= 19; i++) {
            setTimeout(() => {
                divList[num].style.backgroundPosition = `0% ${i * -100}%`;
            }, i * 100);
        }
        if(num == 0) {
            if(a) {
                setTimeout(() => {
                    document.querySelectorAll("div#theFirstExmDiv p")[0].innerHTML = "112 files changed, 3471 insertions(+), 2065 deletions(-)";
                    document.querySelectorAll("div#theFirstExmDiv p")[1].innerHTML = "Enumerating objects: 425, done.<br>Counting objects: 100% (425/425), done.";
                    document.querySelectorAll("div#theFirstExmDiv p")[2].innerHTML = "Writing objects: 100% (227/227), 1.44 MiB | 875.00 KiB/s, done.<br>Total 227 (delta 111), reused 0 (delta 0), pack-reused 0";
                    document.querySelector("div#theFirstExmDiv a.btn").innerHTML = "重新演示";
                    document.querySelector("div#theFirstExmDiv a.btn").href = "javascript:eraseAndShow(0, 0);";
                }, 1900);
            }
            else {
                setTimeout(() => {
                    document.querySelectorAll("div#theFirstExmDiv p")[0].innerHTML = "心情，是一种感情状态，拥有了好心情，也就拥有了自信，继而拥有了年轻和健康。就拥有了对未来生活的向往，充满期待，让我们拥有一份好心情吧，因为生活着就是幸运和快乐。";
                    document.querySelectorAll("div#theFirstExmDiv p")[1].innerHTML = "当你孤独时，风儿就是我的歌声，愿它能使你得到片刻的安慰；当你骄傲时，雨点就是我的警钟，愿它能使你获得永恒的谦逊。";
                    document.querySelectorAll("div#theFirstExmDiv p")[2].innerHTML = "友情如水，淡而长远；友情如茶，香而清纯；友情如酒，烈而沁心；友情如雨，细而连绵；友情如雪，松而亮洁。人生短暂，珍惜友情。";
                    document.querySelector("div#theFirstExmDiv a.btn").innerHTML = "隐藏和显示";
                    document.querySelector("div#theFirstExmDiv a.btn").href = "javascript:eraseAndShow(0, 1);";
                }, 1900);
            }
        }
        for(let i = 1; i <= 19; i++) {
            setTimeout(() => {
                divList[num].style.backgroundPosition = `-100% ${i * -100}%`;
            }, i * 100 + 2100);
        }
        setTimeout(() => {divList[num].style.display = "none";}, 4000);
    }
</script>

<hr>

<p>希望对自己，对别人都有帮助！</p>
<!-- https://ncase.me/trust/ -->

    </div>
    <div class="post-footer">
        <div class="post-tags">
            <a href="/tags/JavaScript/"><i class="fa fa-tag"></i> JavaScript</a>
            <a href="/tags/HTML/"><i class="fa fa-tag"></i> HTML</a>
        </div>
        <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/hexo-pretty/"><i class="fa fa-angle-left"></i> Hexo 建立静态博客记录</a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/bichaj/">并查集概念 <i class="fa fa-angle-right"></i></a>
            </div>
        </div>
    </div>
</div>
            </div>
        </main>
        <div class="back-to-top"><i class="fa fa-angles-up"></i><span class="progress"></span></div><div class="search-overlay">
    <div class="search-container">
        <div class="input-header">
            <span class="search-icon"><i></i></span>
            <input type="search" placeholder="请稍候..." autocomplete="off" autocapitalize="off" spellcheck="false" maxlength="80" class="search-input">
            <span><i class="fa fa-circle-xmark search-close"></i></span>
        </div>
        <div class="result-container"></div>
    </div>
</div>
        <footer class="footer">
            © 2024 &nbsp;<i class="fa fa-paper-plane"></i>&nbsp; JoyWonderful
        </footer><noscript></noscript>

<script src="/js/loader.js"></script>


<script defer src="/js/lib/pjax.min.js"></script>


<script src="/js/lib/anime.min.js"></script>


<script src="/js/lib/katex/katex.min.js"></script>


<script src="/js/lib/katex/auto-render.min.js"></script>


<script src="/js/lib/search.js"></script>

    </body>
</html>