
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <title>C++ 文件操作 | Some Notes</title>
<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/fonts/lxgw/font.css">


<link rel="stylesheet" href="/fonts/ftawsm/fontaw.css">


<link rel="stylesheet" href="/fonts/ktx/katex.min.css">

    </head>
    <body>
        <main class="main">
            <div class="column">
                <header>
                    <div class="site-brand">
                        <div class="site-nav-left"></div>
                        <div class="site-meta">
                            <p class="site-title">Some Notes</p><p class="site-subtitle">Be HardWorking Every Day.</p>
                        </div>
                        <div class="site-nav-right"></div>
                    </div>
                    <nav class="site-nav">
                        <ul class="main-menu">
                            <li class="menu-item"><a href="/"><i class="fa fa-home fa-fw"></i>首页</a></li>
                            <li class="menu-item"><a href="/tags/"><i class="fa fa-tags fa-fw"></i>标签</a></li>
                            <li class="menu-item"><a href="/categories/"><i class="fa fa-rectangle-list fa-fw"></i>分类</a></li>
                            <li class="menu-item"><a href="/archives/"><i class="fa fa-archive fa-fw"></i>存档</a></li>
                            <li class="menu-item menu-more">
                                <a class="menu-more-btn"><i class="fa fa-ellipsis-vertical fa-fw"></i>更多</a>
                                <a href="/friends/" class="morebtn-item"><i class="far fa-address-card fa-fw"></i>友情链接</a>
                                <a href="/guestbook/" class="morebtn-item"><i class="fa fa-pen-to-square fa-fw"></i>留言板</a>
                                <a href="/about/" class="morebtn-item"><i class="fa fa-circle-info fa-fw fa-fw"></i>关于</a>
                            </li>
                        </ul>
                    </nav>
                </header>
                <div class="site-sidebar">
                    
<script type="application/json" class="cfgKtx">false</script>
<div class="site-overview">
    <div class="site-author">JoyWonderful</div>
    <div class="site-stat">
        <div class="site-stat-item">
            <span class="site-stat-count">41</span>
            <span class="site-stat-text">文章</span>
        </div>
        <div class="site-stat-item">
            <span class="site-stat-count">3</span>
            <span class="site-stat-text">分类</span>
        </div>
        <div class="site-stat-item">
            <span class="site-stat-count">20</span>
            <span class="site-stat-text">标签</span>
        </div>
    </div>
</div>
                </div>
            </div>
            <div class="main-inner">
                
<div class="post-block">
    <header class="post-header">
        <h2 class="post-title">C++ 文件操作</h2>
        <div class="post-meta">
            <span class="post-meta-item">
                <i class="far fa-calendar post-meta-item-icon"></i>
                <span class="post-meta-item-text">发表于 </span>
                <time datetime="2023-07-17T17:23:11+08:00">2023-07-17</time>
            </span>
            <span class="post-meta-item">
                <i class="far fa-calendar-check post-meta-item-icon"></i>
                <span class="post-meta-item-text">更新于 </span>
                <time datetime="2024-05-03T08:52:57+08:00">2024-05-03</time>
            </span>
            <span class="post-meta-item">
                <i class="far fa-folder post-meta-item-icon"></i>
                <span class="post-meta-item-text">分类于 </span>
                <a href="/categories/%E7%BC%96%E7%A8%8B%E9%9A%8F%E8%AE%B0/">编程随记</a>
            </span>
        </div>
    </header>
    <div class="post-body">
        <p>我曾经用 Python 的 tkinter 库写过一个<a style="border-bottom:none;" target="_blank" rel="noopener" href="https://github.com/JoyWonderful/My-Python-File/blob/main/text-txt.py">文本编辑器</a>，一百多行，当时幼稚的我以为自己很了不起，因为当时的我认为读写文件是一件很复杂的事情。后来看看，这个东西做得很蹩脚，一个简单的 <code>with open()</code> 就完成了读写文件的操作，可见文件的读写是个很平常的事情。当年的喜悦大概是学到读写文件的喜悦吧。<br>C++ 读写文件，也算是比较平常的。当数据点大的时候输出到文件里更方便。就在这里小记一下读写文件的操作。</p>
<span id="more"></span>

<hr>

<p><code>fstream</code> 有两个类，分别是 <code>ofstream</code> 和 <code>ifstream</code>。<code>ofstream</code> 是写文件的，<code>ifstream</code> 是读文件的。这是一个打开文件的语法：</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"./text.txt"</span><span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>in <span class="token operator">|</span> ios<span class="token double-colon punctuation">::</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span>file object<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">[</span>file path<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>open mode<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> std<span class="token double-colon punctuation">::</span>ofstream<span class="token double-colon punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>__s<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios_base<span class="token double-colon punctuation">::</span>openmode __mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">inline</span> <span class="token keyword">void</span> std<span class="token double-colon punctuation">::</span>ifstream<span class="token double-colon punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>__s<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ios_base<span class="token double-colon punctuation">::</span>openmode __mode<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> __s<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>openmode __mode <span class="token operator">=</span> ios_base<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ifstream</span>
<span class="token function">open</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> __s<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>openmode __mode <span class="token operator">=</span> ios_base<span class="token double-colon punctuation">::</span>out <span class="token operator">|</span> ios_base<span class="token double-colon punctuation">::</span>trunc<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ofstream</span></code></pre>
<p>其中，<code>|</code> 可以将多个打开模式加在一起。打开模式有：</p>
<ol>
<li>常用的<ul>
<li><code>ios::in</code> 打开文件读取，用于 <code>ifstream</code>。</li>
<li><code>ios::out</code> 打开文件写入，用于 <code>ofstream</code>。</li>
</ul>
</li>
<li>不常用的<ul>
<li><code>ios::app</code> 将写入的内容追加在末尾。用于 <code>ofstream</code>。</li>
<li><code>ios::ate</code> 打开定位到末尾。用于 <code>ofstream</code>。</li>
<li><code>ios::trunc</code> 若文件存在，则覆盖文件，不保留原始内容。在 <code>ofstream</code> 中，默认是 <code>ios::trunc</code>。</li>
</ul>
</li>
</ol>
<p>当写入或读取文件时，和 <code>cin``cout</code> 差不多。例如：</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

ofstream outfile<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    outfile<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"./text.txt"</span><span class="token punctuation">,</span> ios<span class="token double-colon punctuation">::</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
    outfile <span class="token operator">&lt;&lt;</span> <span class="token string">"text"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token char">'P'</span><span class="token punctuation">;</span>
    outfile <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    outfile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>这段代码会向当前目录下 <code>text.txt</code> 写入 <code>&quot;text\n&quot;</code> 和 <code>&quot;P\n&quot;</code>。<br>程序结束，最好<strong>关闭文件</strong>，使用 <code>[file object].close()</code>，虽然不关闭文件也没关系。</p>

    </div>
    <div class="post-footer">
        <div class="post-tags">
            <a href="/tags/%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/"><i class="fa fa-tag"></i> 语言入门</a>
        </div>
        <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/lianbiao/"><i class="fa fa-angle-left"></i> 线性数据结构：链表的模板</a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/dfs/">深度优先搜索 <i class="fa fa-angle-right"></i></a>
            </div>
        </div>
    </div>
</div>
            </div>
        </main>
        <div class="back-to-top"><i class="fa fa-angles-up"></i><span class="progress"></span></div>
        <footer class="footer">
            © 2024 &nbsp;<i class="fa fa-paper-plane"></i>&nbsp; JoyWonderful
        </footer><noscript></noscript>

<script src="/js/loader.js"></script>


<script defer src="/js/lib/pjax.min.js"></script>


<script src="/js/lib/anime.min.js"></script>


<script src="/js/lib/katex/katex.min.js"></script>


<script src="/js/lib/katex/auto-render.min.js"></script>

    </body>
</html>